{% extends "ui/ui_login.html" %}

{% block app_content %}
    <div class="card p-4">
        <div class="card-body">
            <form action="" method="post" class="form" role="form">
                {{ form.csrf_token }}
                <h1>Login</h1>
                <p class="text-muted">Sign In to your account</p>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                    <span class="input-group-text">
                      <i class="icon-user"></i>
                    </span>
                    </div>
                    {{ form.email(placeholder="example@gmail.com") }}
                    {% for error in form.email.errors %}
                        <span style="color: red;">[{{ error }}]</span>
                    {% endfor %}
                </div>
                <div class="input-group mb-4">
                    <div class="input-group-prepend">
                    <span class="input-group-text">
                      <i class="icon-lock"></i>
                    </span>
                    </div>
                    {{ form.password(placeholder="Password") }}
                    {% for error in form.password.errors %}
                        <span style="color: red;">[{{ error }}]</span>
                    {% endfor %}
                </div>
                {% for message in get_flashed_messages() %}
                    <div class="alert alert-danger">
                        <button type="button" class="close" data-dismiss="alert">&times;</button>
                        {{ message }}
                    </div>
                {% endfor %}
                {{ form.remember_me }} {{ form.remember_me.label }}
                <div class="row">
                    <div class="col-6">
                        <input class="btn btn-primary px-4" id="submit" name="submit" type="submit" value="Login">
                        {#                    <button class="btn btn-primary px-4 login-submit" type="button">#}
                        {#                        <i class="fas fa-spinner fa-spin" style="display: none"></i> Login#}
                        {#                    </button>#}
                    </div>
                    <div class="col-6 text-right">
                        <a href="/reset_password_request">Forgot password?</a>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="card text-white bg-primary py-5 d-md-down-none" style="width:44%">
        <div class="card-body text-center">
            <div>
                <h2>CS Education</h2>
                <p>BLENDED LEARNING</p>
            </div>
        </div>
    </div>
{% endblock %}

{#{% block scripts %}#}
{#    {{ super() }}#}
{#    <script type="text/javascript">#}
{#		window.onload = function () {#}
{#			$('.login-submit').on('click', function () {#}
{#				var $btn = $(this);#}
{#                var data = {email: $('.email').val(), password: $('.passwd').val(),#}
{#                    remember_me: $('#remember-me').prop('checked'), csrf_token: $('#csrf_token').val()};#}
{#				$.ajax({#}
{#                    method: 'POST',#}
{#                    url: '/auth/login',#}
{#                    data: data,#}
{#                    beforeSend: function () {#}
{#                    	$btn.attr('disabled', true);#}
{#                        $btn.children('i').show();#}
{#					},#}
{#                    complete: function () {#}
{#                    	$btn.attr('disabled', false);#}
{#                        $btn.children('i').hide();#}
{#					},#}
{#                    success: function () {#}
{#                    	location.reload();#}
{#					}#}
{#                });#}
{#			});#}
{#		}#}
{#    </script>#}
{#{% endblock scripts %}#}

